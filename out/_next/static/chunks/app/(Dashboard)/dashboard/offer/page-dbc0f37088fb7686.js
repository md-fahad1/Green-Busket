(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5979],{78502:function(e,t,n){Promise.resolve().then(n.bind(n,43814))},43814:function(e,t,n){"use strict";n.r(t);var r=n(57437),a=n(2265),i=n(48024),c=n(38472),l=n(48367),s=n(58292),o=n(87116),d=n(62197),f=n(80511),h=n(91326),u=n(58433),m=n(66858),x=n(75519),p=n(92674),j=n(28027),Z=n(86645),g=n(74691),v=n(68884),y=n(66648);let k=(0,i.ZP)(l.Z)(e=>{let{theme:t}=e;return{["&.".concat(s.Z.head)]:{color:t.palette.common.white},["&.".concat(s.Z.body)]:{fontSize:14}}}),b=(0,i.ZP)(o.Z)(e=>{let{theme:t}=e;return{"&:nth-of-type(odd)":{backgroundColor:t.palette.action.hover}}});t.default=()=>{let[e,t]=(0,a.useState)([]),[n,i]=(0,a.useState)({OfferPicture:null,name:"",description:""}),[l,s]=(0,a.useState)([{key:"",value:""}]),P=async()=>{try{let e=await c.Z.get("".concat("https://testingbackend.ceramicandfoodproducts.com","/offers"));t(e.data)}catch(e){console.error("Error fetching offers:",e)}};(0,a.useEffect)(()=>{P()},[]);let O=e=>{let{name:t,value:n}=e.target;i(e=>({...e,[t]:n}))},C=(e,t,n)=>{let r=[...l];r[e][t]=n,s(r)},w=e=>{let t=[...l];t.splice(e,1),s(t)},N=async()=>{try{let e=new FormData;e.append("name",n.name),e.append("description",n.description),e.append("OfferPicture",n.OfferPicture);let t={};l.forEach(e=>{if(e.key)try{t[e.key]=JSON.parse(e.value)}catch(n){t[e.key]=e.value}}),e.append("Details",JSON.stringify(t)),await c.Z.post("".concat("https://testingbackend.ceramicandfoodproducts.com","/offers/add"),e,{headers:{"Content-Type":"multipart/form-data"}}),i({OfferPicture:null,name:"",description:""}),s([{key:"",value:""}]),P()}catch(e){console.error("Error adding offer:",e)}},E=async e=>{try{await c.Z.delete("".concat("https://testingbackend.ceramicandfoodproducts.com","/offers/").concat(e)),P()}catch(e){console.error("Error deleting offer:",e)}};return(0,r.jsxs)(d.Z,{children:[(0,r.jsx)(f.Z,{variant:"h4",gutterBottom:!0,children:"Offers Management"}),(0,r.jsxs)(h.Z,{component:"form",sx:{mb:3},noValidate:!0,autoComplete:"off",children:[(0,r.jsxs)(u.ZP,{container:!0,spacing:3,children:[(0,r.jsx)(u.ZP,{item:!0,xs:12,sm:4,children:(0,r.jsx)(m.Z,{fullWidth:!0,label:"Offer Name",variant:"outlined",name:"name",value:n.name,onChange:O})}),(0,r.jsx)(u.ZP,{item:!0,xs:12,sm:4,children:(0,r.jsx)(m.Z,{fullWidth:!0,label:"Offer Description",variant:"outlined",name:"description",value:n.description,onChange:O})}),(0,r.jsxs)(u.ZP,{item:!0,xs:12,sm:4,children:[(0,r.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{let t=e.target.files[0];t&&i(e=>({...e,OfferPicture:t}))}}),n.OfferPicture&&(0,r.jsx)(f.Z,{variant:"body2",sx:{mt:1},children:n.OfferPicture.name})]})]}),(0,r.jsx)(f.Z,{variant:"h6",sx:{mt:4},children:"Offer Details (Dynamic)"}),l.map((e,t)=>(0,r.jsxs)(u.ZP,{container:!0,spacing:2,alignItems:"center",sx:{mt:1},children:[(0,r.jsx)(u.ZP,{item:!0,xs:5,children:(0,r.jsx)(m.Z,{fullWidth:!0,label:"Key",variant:"outlined",value:e.key,onChange:e=>C(t,"key",e.target.value)})}),(0,r.jsx)(u.ZP,{item:!0,xs:5,children:(0,r.jsx)(m.Z,{fullWidth:!0,label:"Value",variant:"outlined",value:e.value,onChange:e=>C(t,"value",e.target.value)})}),(0,r.jsx)(u.ZP,{item:!0,xs:2,children:(0,r.jsx)(x.Z,{variant:"outlined",color:"error",onClick:()=>w(t),children:"Remove"})})]},t)),(0,r.jsx)(x.Z,{variant:"outlined",color:"primary",onClick:()=>{s([...l,{key:"",value:""}])},sx:{mt:2},children:"+ Add More"}),(0,r.jsx)(h.Z,{sx:{mt:3},children:(0,r.jsx)(x.Z,{variant:"contained",color:"primary",onClick:N,children:"Add Offer"})})]}),(0,r.jsx)(h.Z,{sx:{overflowY:"auto"},children:(0,r.jsx)(p.Z,{component:j.Z,sx:{width:"100%",overflow:"auto"},children:(0,r.jsxs)(Z.Z,{"aria-label":"offers table",children:[(0,r.jsx)(g.Z,{className:"bg-dash-primary",children:(0,r.jsxs)(o.Z,{children:[(0,r.jsx)(k,{align:"center",children:"Image"}),(0,r.jsx)(k,{align:"center",children:"Name"}),(0,r.jsx)(k,{align:"center",children:"Description"}),(0,r.jsx)(k,{align:"center",children:"Actions"})]})}),(0,r.jsx)(v.Z,{children:null==e?void 0:e.map(e=>(0,r.jsxs)(b,{children:[(0,r.jsx)(k,{align:"center",children:e.image&&(0,r.jsx)(y.default,{src:e.image,alt:e.name,width:50,height:50,className:"rounded-full object-cover"})}),(0,r.jsx)(k,{align:"center",children:e.name}),(0,r.jsx)(k,{align:"center",children:e.description}),(0,r.jsx)(k,{align:"center",children:(0,r.jsx)(x.Z,{onClick:()=>E(e.id),color:"error",children:"Delete"})})]},e.id))})]})})})]})}}},function(e){e.O(0,[4047,8472,9537,8173,2501,4312,6291,4893,6537,6858,3910,2971,7023,1744],function(){return e(e.s=78502)}),_N_E=e.O()}]);