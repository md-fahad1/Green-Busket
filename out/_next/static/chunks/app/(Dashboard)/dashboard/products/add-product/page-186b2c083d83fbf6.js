(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9003],{88612:function(e,t,a){Promise.resolve().then(a.bind(a,93982))},93982:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return C},dynamic:function(){return w}});var s=a(57437),l=a(2265),r=a(91326),i=a(66858),n=a(64818),d=a(11656),c=a(75519),o=a(38472);a(18416);var u=a(66648),m=a(23051),x=e=>{let{images:t,setImages:a,error:r,setFormError:i}=e,[n,d]=(0,l.useState)(null),c=(0,l.useRef)(null);(0,l.useEffect)(()=>{t.length>0?d(t[0].src):d(null)},[t]);let o=e=>{d(e)},x=e=>{a(t.filter(t=>t.id!==e)),d(null)};return(0,s.jsxs)("div",{className:"w-[33%] space-y-3",children:[(0,s.jsx)("label",{className:"text-xl font-medium",children:"Product Image"}),(0,s.jsx)("div",{className:"flex justify-center",children:n?(0,s.jsx)("img",{src:n,alt:"Preview Product",className:"w-[200px]"}):(0,s.jsx)("p",{children:"No Image Selected"})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[t.map(e=>(0,s.jsxs)("div",{onClick:()=>o(e.src),className:"relative",children:[(0,s.jsx)(u.default,{src:e.src,height:100,width:100,alt:"product image",className:"w-[100px] h-[100px] object-contain border border-dash-primary ".concat(n===e.src&&"border-2 border-secondary"," rounded p-1")}),(0,s.jsx)("button",{onClick:()=>x(e.id),className:"p-1 absolute top-1 right-1 text-red-400 bg-white rounded-full",children:"X"})]},e.id)),t.length<4&&(0,s.jsxs)("button",{type:"button",onClick:()=>{c.current.click()},className:" border border-dashed w-[100px] h-[100px] flex justify-center items-center border-secondary p-4 rounded ",children:[(0,s.jsx)("input",{type:"file",ref:c,onChange:e=>{a([...t,...Array.from(e.target.files).map(e=>({id:"img-".concat(e.lastModified),file:e,src:URL.createObjectURL(e)}))]),i({...r,images:""})},name:"image",className:"hidden",required:!0}),(0,s.jsx)(m.ggF,{className:"text-dash-primary text-5xl"})]})]})]})},p=a(62501),h=a(16356),g=a(7476);let b={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",boxShadow:24,p:4};var j=e=>{let{setAttributes:t,quantity:a}=e,[n,d]=(0,l.useState)(!1),o=()=>d(!1),[u,m]=(0,l.useState)([{attribute:"",name:[""],value:[""]}]),[x,j]=(0,l.useState)({}),[f,y]=(0,l.useState)(0),v=(e,t,a)=>{let{name:s,value:l}=e.target,r=[...u];"attribute"===s?r[t][s]=l:"name"===s?r[t].name[a]=l:(r[t].value[a]=parseInt(l),y(u[t].value.reduce((e,t)=>e+=t,0))),m([...r])},N=e=>{var t,s;let l=u[e].value.reduce((e,t)=>e+=t,0);if(y(l),parseInt(a)<=l){j({message:"Not allow over quantity items",error:!0});return}j({});let r=[...u];null===(t=r[e])||void 0===t||t.name.push(""),null===(s=r[e])||void 0===s||s.value.push(""),m([...r])},C=e=>{let t=[...u];t.pop(),m([...t])},w=(e,t)=>{var a,s;let l=[...u];0!==t&&(null===(a=l[e])||void 0===a||a.name.pop(),null===(s=l[e])||void 0===s||s.value.pop(),m([...l]))};return(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{children:(0,s.jsx)(p.Z,{open:n,onClose:o,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",className:"rounded",children:(0,s.jsxs)(r.Z,{sx:b,className:"space-y-4 max-h-screen overflow-auto",children:[(0,s.jsx)("h3",{className:"font-oswald font-bold text-dash-primary text-xl",children:"Product Attribute"}),(0,s.jsx)("div",{className:" space-y-4",children:u.map((e,t)=>(0,s.jsx)("div",{children:(0,s.jsxs)("div",{className:"flex gap-3 ",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(i.Z,{onChange:e=>v(e,t),name:"attribute",value:e.attribute,size:"small",sx:{"& .MuiInputBase-input":{paddingY:"4px"}},required:!0}),u.length-1===t&&(0,s.jsx)("div",{className:"absolute flex flex-col -left-5 top-[6px]",children:t>0&&(0,s.jsx)("button",{onClick:()=>C(t),children:(0,s.jsx)(g.FS3,{className:" text-red-500 "})})})]}),(0,s.jsx)("div",{className:"flex gap-1",children:(0,s.jsxs)("div",{className:"space-y-2",children:[e.name.map((a,l)=>(0,s.jsxs)("div",{className:"flex gap-1 relative",children:[(0,s.jsx)(i.Z,{onChange:e=>v(e,t,l),name:"name",value:a,size:"small",sx:{"& .MuiInputBase-input":{paddingY:"4px"}},required:!0}),(0,s.jsx)(i.Z,{onChange:e=>v(e,t,l),name:"value",size:"small",value:isNaN(e.value[l])?"":e.value[l],sx:{"& .MuiInputBase-input":{paddingY:"4px"}},required:!0}),e.name.length-1===l&&(0,s.jsxs)("div",{className:"absolute flex flex-col -right-5 top-1/2 -translate-y-1/2",children:[l>0&&(0,s.jsx)("button",{onClick:()=>w(t,l),children:(0,s.jsx)(g.FS3,{className:" text-red-500 "})}),(0,s.jsx)("button",{onClick:()=>N(t),children:(0,s.jsx)(h.OrI,{className:" text-dash-primary"})})]})]},l)),(0,s.jsx)("span",{className:"text-red-500",children:x.message})]})})]})},t))}),(0,s.jsx)(c.Z,{onClick:()=>{j({}),m([...u,{attribute:"",name:[""],value:[""]}])},variant:"contained",style:{backgroundColor:"#2FB261",marginTop:"8px",padding:"2px 8px"},className:" text-white",children:"New Attribute"}),(0,s.jsxs)("div",{className:"border-t flex justify-between",children:[(0,s.jsx)(c.Z,{onClick:o,variant:"contained",style:{backgroundColor:"#2FB261",marginTop:"8px"},type:"submit",className:" text-white",children:"Close"}),(0,s.jsx)(c.Z,{onClick:()=>{if(parseInt(a)!==f){j({message:"quantity doesn't matched",error:!0});return}j({}),t(u.reduce((e,t)=>{let a=t.attribute,s=t.name,l=t.value,r={};return s.forEach((e,t)=>{""!==l[t]&&(r[e]=l[t])}),e[a]=r,d(!1),e},{}))},variant:"contained",style:{backgroundColor:"#2FB261",marginTop:"8px"},type:"submit",className:" text-white",children:"Save"})]})]})})}),(0,s.jsx)(c.Z,{onClick:()=>d(!0),variant:"contained",style:{backgroundColor:"#2FB261"},className:" text-white",children:"Add Product Attribute"})]})};let f=(0,a(57818).default)(()=>Promise.all([a.e(3070),a.e(2916),a.e(8436)]).then(a.t.bind(a,98436,23)),{loadableGenerated:{webpack:()=>[98436]},ssr:!1}),y={toolbar:[[{header:"1"},{header:"2"}],["bold","italic","underline","strike","blockquote"],[{color:[]},{background:[]}],[{size:[]}],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"},{script:"super"},{script:"sub"},{align:[]}],["link","image","video"],["clean"]]},v=["header","font","size","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image","video","code-block","align","direction","color","background","script","super","sub"];var N=e=>{let{description:t,setDescription:a,error:l,setFormError:r}=e;return(0,s.jsxs)("div",{children:[(0,s.jsx)(f,{className:"h-[300px] mb-32 lg:mb-16",theme:"snow",value:t,onChange:e=>{a(e),r({...l,description:""})},modules:y,formats:v}),(null==l?void 0:l.description)&&(0,s.jsx)("span",{className:"text-red-500 -mt-16",children:l.description})]})},C=()=>{let[e,t]=(0,l.useState)([]),[a,u]=(0,l.useState)(""),[m,p]=(0,l.useState)({}),[h,g]=(0,l.useState)([]),[b,f]=(0,l.useState)({name:"",price:"",quantity:"",categoryId:""}),[y,v]=(0,l.useState)({name:"",price:"",description:"",categoryId:"",quantity:"",images:""}),[C,w]=(0,l.useState)(!1);(0,l.useEffect)(()=>{(async()=>{try{let e=await o.Z.get("".concat("https://testingbackend.ceramicandfoodproducts.com","/Category/search"));t(e.data)}catch(e){console.log("category fetch failed")}})()},[]);let k=e=>{f({...b,[e.target.name]:e.target.value}),v({...y,[e.target.name]:""})},q=async e=>{e.preventDefault();let t=!0,s={...y};""===b.name.trim()&&(s.name="Product name field is required",t=!1),""===a.trim()?(s.description="Product description field is required",t=!1):s.description="",""===b.price.trim()&&(s.price="Product price field is required",t=!1),""===b.quantity.trim()&&(s.quantity="Product quantity field is required",t=!1),b.categoryId||(s.categoryId="Product category select is required",t=!1),h.length||(s.images="Product image field is required",t=!1);let l=new FormData;if(l.append("name",b.name),l.append("desc",a),l.append("price",b.price),l.append("json_attribute",JSON.stringify({attributes:m})),l.append("categoryId",b.categoryId),l.append("quantity",b.quantity),l.append("date",new Date().toISOString()),h.forEach(e=>{l.append("ProductPicture",e.file)}),t){v({});try{let e=await o.Z.post("".concat("https://testingbackend.ceramicandfoodproducts.com","/Product/add"),l,{headers:{"Content-Type":"multipart/form-data"}});201===e.status&&(window.scrollTo(0,0),w(!0),f({name:"",price:"",quantity:"",categoryId:""}),u(""),p(""),g([]))}catch(e){console.log(e.message)}}else v(s)};return(0,s.jsxs)("div",{className:"w-[95%] md:w-full mx-auto ",children:[C&&(0,s.jsx)(n.Z,{className:"mb-3",severity:"success",onClose:()=>{w(!1)},children:"Product Added Successfully"}),(0,s.jsx)("h2",{className:"text-xl font-bold text-secondary",children:"Add Product"}),(0,s.jsx)("div",{className:"text-secondary mt-6 border rounded-md h-full px-4 bg-white py-6 lg:w-full shadow-[0_0px_5px_0px_rgba(0,0,0,0.3)]",children:(0,s.jsxs)(r.Z,{component:"form",noValidate:!0,autoComplete:"off",className:"space-y-4",onSubmit:q,children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"mb-1 ",children:["Product Title",(0,s.jsx)("span",{className:"text-red-500 select-none",children:" *"})]}),(0,s.jsx)(i.Z,{fullWidth:!0,size:"small",value:b.name,name:"name",onChange:k}),y.name&&(0,s.jsx)("span",{className:"text-red-500",children:y.name})]}),(0,s.jsxs)("div",{className:"",children:[(0,s.jsxs)("label",{className:"mb-1",children:["Product Description",(0,s.jsx)("span",{className:"text-red-500 select-none",children:" *"})]}),(0,s.jsx)(N,{description:a,setDescription:u,error:y,setFormError:v})]}),(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-6 justify-between ",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("label",{className:"mb-1 ",children:["Price",(0,s.jsx)("span",{className:"text-red-500 select-none",children:" *"})]}),(0,s.jsx)(i.Z,{id:"fullWidth",fullWidth:!0,size:"small",onChange:k,name:"price",value:b.price,required:!0}),y.price&&(0,s.jsx)("span",{className:"text-red-500",children:y.price})]}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("label",{className:"mb-1 ",children:["Quantity",(0,s.jsx)("span",{className:"text-red-500 select-none",children:" *"})]}),(0,s.jsx)(i.Z,{id:"fullWidth",fullWidth:!0,size:"small",onChange:k,name:"quantity",value:b.quantity,required:!0}),y.quantity&&(0,s.jsx)("span",{className:"text-red-500",children:y.quantity})]}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("label",{className:"mb-1 ",children:["Category",(0,s.jsx)("span",{className:"text-red-500 select-none",children:" *"})]}),(0,s.jsxs)(i.Z,{id:"outlined-select-currency",select:!0,defaultValue:"Choose Category",size:"small",fullWidth:!0,onChange:k,name:"categoryId",children:[(0,s.jsx)(d.Z,{value:"Choose Category",disabled:!0,children:"Choose Category"}),e.map(e=>(0,s.jsx)(d.Z,{value:e.Id,children:e.name},e.Id))]}),y.categoryId&&(0,s.jsx)("span",{className:"text-red-500",children:y.categoryId})]})]}),(0,s.jsx)(j,{setAttributes:p,quantity:b.quantity}),(0,s.jsxs)("div",{children:[(0,s.jsx)(x,{images:h,setImages:g,error:y,setFormError:v}),y.images&&(0,s.jsx)("span",{className:"text-red-500",children:y.images})]}),(0,s.jsx)(c.Z,{variant:"contained",style:{backgroundColor:"#2FB261"},type:"submit",className:" text-white",children:"Submit"})]})})]})};let w="force-dynamic"}},function(e){e.O(0,[7325,522,6051,9956,4047,8472,9537,8173,2501,4312,6291,4893,6858,6931,5643,2971,7023,1744],function(){return e(e.s=88612)}),_N_E=e.O()}]);