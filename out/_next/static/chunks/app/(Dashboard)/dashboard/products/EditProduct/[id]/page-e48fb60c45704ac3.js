(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6148],{63328:function(e,t,a){Promise.resolve().then(a.bind(a,22690))},22690:function(e,t,a){"use strict";a.d(t,{default:function(){return y}});var l=a(57437),s=a(2265),r=a(44199),n=a.n(r),c=a(66648),i=a(76136),d=a(92857),o=a(85097),u=a(7432),x=a(64818),p=a(75519),m=a(62501),h=a(91326),f=a(38472),b=a(16463),g=a(64379),j=a.n(g);function y(e){let{params:t}=e,{id:a}=t,[r,g]=(0,s.useState)(!1),[y,v]=(0,s.useState)([]),[N,w]=(0,s.useState)(""),[S,k]=(0,s.useState)([{attribute:"",values:[""]}]),[C,P]=(0,s.useState)({}),[Z,q]=(0,s.useState)(!1),[E,F]=(0,s.useState)([]),[A,I]=(0,s.useState)(!0),[L,D]=(0,s.useState)(""),[_,O]=(0,s.useState)([]),R=(0,b.useRouter)(),T=(0,s.useCallback)(async()=>{try{let e=await f.Z.get("".concat("https://testingbackend.ceramicandfoodproducts.com","/Category/search"));O(e.data)}catch(e){console.error("Error fetching categories:",e)}},[]),B=(0,s.useCallback)(async()=>{try{let e=await f.Z.get("".concat("https://testingbackend.ceramicandfoodproducts.com","/Product/search/").concat(a));F(e.data)}catch(e){D("Failed to fetch data. Please try again later.")}finally{I(!1)}},[a]);(0,s.useEffect)(()=>{T(),B()},[T,B]);let U=(e,t,a)=>{let{name:l,value:s}=e.target,r=[...S];"attribute"===l?r[t][l]=s:r[t].values[a]=s,k(r)},V=e=>{let t=[...S];t[e].values.push(""),k(t)},J=(0,s.useRef)(null),M=(0,s.useMemo)(()=>({readonly:!1}),[]),Q=async e=>{e.preventDefault();let t=new FormData;t.append("name",e.target.productTitle.value),t.append("desc",N||""),t.append("price",e.target.price.value),t.append("json_atribute",JSON.stringify(C)),t.append("categoryId",e.target.category.value),t.append("quantity",e.target.quantity.value),t.append("date",new Date().toISOString()),y.forEach(e=>{t.append("ProductPicture",e.file)});try{let e=await f.Z.put("".concat("https://testingbackend.ceramicandfoodproducts.com","/Product/edit/").concat(a),t,{headers:{"Content-Type":"multipart/form-data"}});200===e.status&&(g(!0),j().fire({icon:"success",title:"Product Updated Successfully!",showConfirmButton:!1,timer:1500}).then(()=>{R.push("/dashboard/products")}))}catch(e){console.error("Error adding product:",e),r("An error occurred while adding the product.")}};return(0,l.jsxs)("div",{className:"flex flex-col  h-screen overflow-auto scrollbar-thin",children:[r&&(0,l.jsx)(x.Z,{className:"mb-3",severity:"success",onClose:()=>{g(!1)},children:"Product update Successfully"}),(0,l.jsxs)("form",{className:"mt-0",onSubmit:Q,children:[(0,l.jsxs)("p",{className:"text-xl text-[rgba(0,0,255,0.50)]",children:["Edit Product #",a]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg p-5",children:[(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("label",{htmlFor:"productTitle",className:"inputLabel font-thin mb-2 text-[1rem] tracking-normal",children:"Product Title"}),(0,l.jsx)("input",{type:"text",name:"productTitle",placeholder:E.name,defaultValue:E.name,className:"inputStyle bg-white",required:!0})]}),(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("label",{htmlFor:"productDescription",className:"inputLabel my-2 text-[1rem] font-thin tracking-normal",children:"Product Description"}),(0,l.jsx)(n(),{ref:J,value:E.desc||"",config:M,tabIndex:1,onBlur:e=>{w(e||"")},onChange:e=>{w(e||"")}})]}),(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("label",{htmlFor:"price",className:"inputLabel my-2 text-[1rem] font-thin tracking-normal",children:"Price"}),(0,l.jsx)("input",{type:"text",name:"price",className:"inputStyle bg-white",placeholder:E.price,defaultValue:E.price,required:!0})]}),(0,l.jsxs)("div",{className:"my-5",children:[(0,l.jsx)(p.Z,{onClick:()=>q(!0),variant:"contained",className:"bg-[blue] px-2 py-1 text-white",children:"Add Product Attribute"}),(0,l.jsx)(m.Z,{open:Z,children:(0,l.jsxs)(h.Z,{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[90vw] lg:w-fit bg-white border-2 shadow-lg p-4",children:[(0,l.jsx)("p",{className:"font-oswald text-xl inputLabel",children:"Edit Attribute"}),(0,l.jsx)("div",{className:"max-h-[20rem] flex flex-col flex-wrap overflow-auto scrollbar-thin my-2",children:(0,l.jsx)("div",{className:"w-full bg-gray-200 p-2",children:(0,l.jsxs)("div",{className:"w-fit",children:[S.map((e,t)=>(0,l.jsxs)("div",{className:"flex flex-col lg:flex-row md:flex-row mb-2 gap-2",children:[(0,l.jsx)("div",{children:(0,l.jsx)("input",{type:"text",name:"attribute",placeholder:"Attribute",value:e.attribute,onChange:e=>U(e,t)})}),(0,l.jsx)("div",{children:e.values.map((a,s)=>(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,l.jsx)("input",{type:"text",name:"value-".concat(s),placeholder:"Value",value:a,onChange:e=>U(e,t,s),style:{marginRight:"5px",marginBottom:"5px"}}),s===e.values.length-1&&(0,l.jsx)("button",{onClick:()=>V(t),children:(0,l.jsx)(o.RWZ,{color:"red"})})]},s))})]},t)),(0,l.jsx)(p.Z,{onClick:()=>{k([...S,{attribute:"",values:[""]}])},className:"bg-[rgba(0,0,255,0.5)] px-2 py-1 text-white text-sm",children:"New Attribute"})]})})}),(0,l.jsxs)("div",{className:"w-full flex justify-around",children:[(0,l.jsx)(p.Z,{onClick:()=>q(!1),variant:"contained",sx:{mt:2},className:"bg-[blue] px-2 py-1 text-white",children:"Close"}),(0,l.jsx)(p.Z,{variant:"outlined",sx:{mt:2},className:"px-2 py-1 outline-double outline-[blue] outline-1",onClick:()=>{let e=S.reduce((e,t)=>(t.attribute&&(e[t.attribute]=t.values.filter(e=>""!==e)),e),{});r(JSON.stringify(e,null,2)),P(e)},children:"Save"})]})]})})]}),(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("label",{htmlFor:"category",className:"inputLabel mb-2 text-[1rem] font-thin tracking-normal",children:"Category"}),(0,l.jsx)("select",{name:"category",required:!0,children:_.map((e,t)=>(0,l.jsx)("option",{value:e.Id,children:e.name},t))})]})]}),(0,l.jsx)("p",{className:"text-xl text-[rgba(0,0,255,0.50)]",children:"Edit Images"}),(0,l.jsxs)("div",{className:"bg-white rounded-lg p-5 flex flex-col h-fit",children:[(0,l.jsx)("div",{className:"flex flex-wrap gap-2 mb-2",children:y.length>0?(0,l.jsx)("div",{className:"flex flex-row gap-3 py-3 flex-wrap",children:y.map(e=>(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(c.default,{src:e.src,alt:"Product",width:100,height:100,className:"object-cover rounded-lg"}),(0,l.jsx)(u.toq,{className:"absolute top-1 right-1 cursor-pointer",onClick:()=>handleDeleteImage(e.id)})]},e.id))}):(0,l.jsx)("p",{children:"No images uploaded"})}),(0,l.jsx)(i.Z,{handleFiles:e=>{let t=[];if(e&&e[0]instanceof File)for(let a=0;a<e.length;a++){let l=e[a];t.push({src:URL.createObjectURL(l),file:l,id:Date.now()+Math.random()})}v(e=>[...e,...t])},children:(0,l.jsxs)("button",{className:"bg-blue-500 text-white py-2 px-4 rounded",type:"button",children:[(0,l.jsx)(d.BAY,{className:"inline"})," Add Images"]})})]}),(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("label",{htmlFor:"quantity",className:"inputLabel mb-2 text-[1rem] font-thin tracking-normal",children:"Quantity"}),(0,l.jsx)("input",{type:"number",name:"quantity",className:"inputStyle bg-white",placeholder:E.quantity,defaultValue:E.quantity,required:!0})]}),(0,l.jsx)("button",{type:"submit",className:"bg-blue-500 text-white py-2 px-4 rounded mt-4",children:"Update"})]})]})}}},function(e){e.O(0,[9461,5706,4574,680,8035,4047,8472,9537,8173,2501,6931,8537,2971,7023,1744],function(){return e(e.s=63328)}),_N_E=e.O()}]);