(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9473],{28596:function(e,t,n){Promise.resolve().then(n.bind(n,29337))},29337:function(e,t,n){"use strict";n.r(t);var a=n(57437),r=n(2265),i=n(38472),s=n(64379),l=n.n(s),o=n(66648);t.default=()=>{let[e,t]=(0,r.useState)(""),[n,s]=(0,r.useState)(null),[d,c]=(0,r.useState)([]),[u,f]=(0,r.useState)(!0),p=async()=>{try{let e=await i.Z.get("".concat("https://testingbackend.ceramicandfoodproducts.com","/Banner/all"));c(e.data)}catch(e){console.error("Failed to load banners:",e)}finally{f(!1)}};(0,r.useEffect)(()=>{p()},[]);let m=async a=>{if(a.preventDefault(),!n){l().fire({icon:"warning",title:"Please select a file!"});return}if(!n.type.startsWith("image/")){l().fire({icon:"warning",title:"Invalid file type!",text:"Please upload an image file."});return}if(n.size>2097152){l().fire({icon:"warning",title:"File too large!",text:"Max allowed size is 2MB."});return}try{let r=new FormData;r.append("EventLink",e),r.append("file",n),await i.Z.post("".concat("https://testingbackend.ceramicandfoodproducts.com","/Banner/add"),r,{headers:{"Content-Type":"multipart/form-data"}}),l().fire({toast:!0,position:"top-end",icon:"success",title:"Banner added successfully!",showConfirmButton:!1,timer:2e3}),t(""),s(null),a.target.reset(),p()}catch(t){var r,o;console.error("Upload error:",t);let e=(null===(r=t.response)||void 0===r?void 0:r.status)===404?"API endpoint not found (404). Check your URL.":(null==t?void 0:null===(o=t.response)||void 0===o?void 0:o.data)||"Something went wrong.";l().fire({icon:"error",title:"Upload failed!",text:e})}},h=e=>(null==e?void 0:e.startsWith("https:/"))&&!e.startsWith("https://")?e.replace("https:/","".concat("https://testingbackend.ceramicandfoodproducts.com","/")):e;return(0,a.jsxs)("div",{className:"max-w-6xl mx-auto mt-10 p-4",children:[(0,a.jsxs)("div",{className:"max-w-md mb-8 border rounded p-4 mx-auto",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4 text-center",children:"Add Banner"}),(0,a.jsxs)("form",{onSubmit:m,className:"flex flex-col space-y-4",children:[(0,a.jsx)("input",{type:"text",placeholder:"Enter Event Link",value:e,onChange:e=>t(e.target.value),className:"border p-2 rounded",required:!0}),(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>s(e.target.files[0]),className:"border p-2 rounded",required:!0}),(0,a.jsx)("button",{type:"submit",className:"bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600",children:"Submit"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-semibold mb-4 text-center",children:"All Banners"}),u?(0,a.jsx)("p",{className:"text-center",children:"Loading banners..."}):(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:d.map(e=>(0,a.jsx)("div",{className:"border p-2 rounded shadow",children:(0,a.jsx)("a",{href:e.EventLink,target:"_blank",rel:"noopener noreferrer",children:(0,a.jsx)(o.default,{src:h(e.path),alt:e.FileName,width:400,height:250,className:"w-full h-[200px] object-cover rounded"})})},e.Id))})]})]})}},66648:function(e,t,n){"use strict";n.d(t,{default:function(){return r.a}});var a=n(55601),r=n.n(a)},55601:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{default:function(){return o},getImageProps:function(){return l}});let a=n(99920),r=n(80497),i=n(38173),s=a._(n(21241));function l(e){let{props:t}=(0,r.getImgProps)(e,{defaultLoader:s.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[e,n]of Object.entries(t))void 0===n&&delete t[e];return{props:t}}let o=i.Image}},function(e){e.O(0,[9461,8472,8173,2971,7023,1744],function(){return e(e.s=28596)}),_N_E=e.O()}]);