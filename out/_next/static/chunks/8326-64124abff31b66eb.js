(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8326],{88326:function(e,t,r){Promise.resolve().then(r.bind(r,77107))},77107:function(e,t,r){"use strict";r.d(t,{default:function(){return g}});var a=r(57437),n=r(2265),l=r(91326),s=r(20124),i=r(23051),o=r(72107),d=r(11444),u=r(66648),c=r(64379),m=r.n(c),f=r(38472),p=r(84894),g=e=>{let{params:t}=e,r=function(){let[e,t]=(0,n.useState)(()=>window.innerWidth);return(0,n.useEffect)(()=>{function e(){t(window.innerWidth)}return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),e}(),{currentUser:c}=(0,d.v9)(e=>e.user),[g,h]=n.useState(r>=1280),[x,b]=n.useState(c.Image),[v,w]=n.useState(!1),y=(0,d.I0)();n.useEffect(()=>{r>=1280?h(!0):h(!1)},[r]);let j=async e=>{y((0,p.kv)());let t=e.target.files[0];if(t)try{let e=await (0,o.Z)(t,{maxSizeMB:.1,maxWidthOrHeight:1024,useWebWorker:!0}),r=new File([e],t.name,{type:t.type}),a=new FileReader;a.onload=e=>{b(e.target.result)},a.readAsDataURL(r);let n=new FormData;n.append("ProfilePicture",r);let l=await f.Z.put("".concat("https://testingbackend.ceramicandfoodproducts.com","/user/ChangeProfilePicture/").concat(c.Id),n);200===l.status&&(y((0,p.Uw)(l.data)),m().fire({icon:"success",title:"Image Updated!",text:"Profile picture uploaded successfully.",confirmButtonColor:"#3085d6",timer:2e3,timerProgressBar:!0}))}catch(e){var r,a;console.error(e),y((0,p.jp)(e.message)),m().fire({icon:"error",title:"Upload Failed!",text:(null==e?void 0:null===(a=e.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.message)||e.message||"An error occurred.",confirmButtonColor:"#d33"})}};n.useEffect(()=>{},[x]);let N=async e=>{e.preventDefault(),y((0,p.kv)());let t=new FormData;t.append("name",e.target.name.value),t.append("address",e.target.address.value),t.append("phone",e.target.phone.value),console.log("data",t);try{let e=await f.Z.put("".concat("https://testingbackend.ceramicandfoodproducts.com","/user/profile/edit/").concat(c.Id),t,{headers:{"Content-Type":"application/json"}});200===e.status&&(y((0,p.Uw)(e.data)),m().fire({icon:"success",title:"Success!",text:"Profile updated successfully.",confirmButtonColor:"#3085d6",timer:2e3,timerProgressBar:!0})),w(!1)}catch(e){var r,a;y((0,p.jp)()),m().fire({icon:"error",title:"Oops...",text:(null==e?void 0:null===(a=e.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.message)||"Something went wrong!",confirmButtonColor:"#d33"})}};return(0,a.jsxs)(l.Z,{className:"w-full flex flex-col items-center justify-center mt-1 px-4",children:[(0,a.jsx)(s.ZP,{}),(0,a.jsx)("p",{className:"text-2xl font-semibold mb-1",children:"Personal Information"}),(0,a.jsxs)("form",{onSubmit:N,className:"bg-white shadow-md rounded-lg px-3  py-2 w-full max-w-3xl",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center mb-6",children:[(0,a.jsx)("div",{className:"h-32 w-32 rounded-full overflow-hidden border-4 bg-gray-200",children:(0,a.jsx)(u.default,{src:x,width:128,height:128,alt:"User Profile",className:"object-cover h-full w-full"})}),(0,a.jsx)("input",{id:"imageChange",type:"file",onChange:j,className:"hidden"}),v&&(0,a.jsxs)("button",{type:"button",onClick:()=>document.getElementById("imageChange").click(),className:"mt-3 bg-dash-primary hover:bg-blue-600 text-white rounded-full px-4 py-2 text-sm",children:[(0,a.jsx)(i.ggF,{size:18,className:"inline-block mr-1"}),"Change Picture"]})]}),[{label:"Name",name:"name",value:c.name},{label:"Email",name:"email",value:c.email,disabled:!0},{label:"Address",name:"address",value:c.address},{label:"Phone",name:"phone",value:c.phone},{label:"Joined",name:"registration_date",value:new Date(c.registration_date).toISOString().split("T")[0],disabled:!0}].map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center gap-1 mb-2",children:[(0,a.jsx)("label",{className:"w-[30%] text-gray-700 font-medium",children:e.label}),v&&!e.disabled?(0,a.jsx)("input",{type:"text",name:e.name,defaultValue:e.value,className:"w-[70%] py-2 px-4 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"}):(0,a.jsx)("p",{className:"w-[70%] py-2 px-4 ".concat(e.disabled?"bg-gray-100 text-gray-500":"text-gray-800"),children:e.value})]},t)),v&&(0,a.jsx)("div",{className:"flex justify-center mt-3",children:(0,a.jsx)("button",{type:"submit",className:"mt-4 bg-dash-primary px-4 py-2 rounded-md text-white",children:"Update Info"})}),!v&&(0,a.jsx)("div",{className:"flex justify-center mt-3",children:(0,a.jsx)("button",{className:"mt-4 bg-dash-primary  px-4 py-2 rounded-md text-white",onClick:()=>w(!0),children:"Edit Info"})})]})]})}},84894:function(e,t,r){"use strict";r.d(t,{AP:function(){return s},Dl:function(){return f},Uw:function(){return c},fc:function(){return l},jp:function(){return m},kv:function(){return u},lA:function(){return n}});let a=(0,r(81904).oM)({name:"user",initialState:{currentUser:null,error:null,loading:!1},reducers:{SignInStart:e=>{e.loading=!0,e.error=null},SignInSuccess:(e,t)=>{e.currentUser=t.payload,e.loading=!1,e.error=null},SignInFailure:(e,t)=>{e.loading=!1,e.error=t.payload},RegisterStart:e=>{e.loading=!0,e.error=null},RegisterSuccess:(e,t)=>{e.currentUser=t.payload,e.loading=!1,e.error=null},RegisterFailure:(e,t)=>{e.loading=!1,e.error=t.payload},UpdateProfileStart:e=>{e.loading=!0,e.error=null},UpdateProfileSuccess:(e,t)=>{e.currentUser={...e.currentUser,...t.payload},e.loading=!1,e.error=null},UpdateProfileFailure:(e,t)=>{e.loading=!1,e.error=t.payload},LogOutUser:(e,t)=>{e.currentUser=null}}}),{SignInStart:n,SignInFailure:l,SignInSuccess:s,RegisterStart:i,RegisterSuccess:o,RegisterFailure:d,UpdateProfileStart:u,UpdateProfileSuccess:c,UpdateProfileFailure:m,LogOutUser:f}=a.actions;t.ZP=a.reducer}}]);